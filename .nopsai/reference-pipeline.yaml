name: reference-pipeline
description: A sample pipeline.
llm_content_sharing: true
llm_output_sharing: true
display_options:
  github_view: "mermaid" # mermaid, tree or flat
container_image: "pipeline-image:latest"
working_directory: "/tmp/test"
timeout: "20m"
environment:
  API_VERSION: "v1"
  DOCKER_HOST: "tcp://192.168.1.16:2375"
steps:
  - name: preparation
    image: pipeline-image:latest
    secrets:
      - TEST_SECRET
    volumes:
      - "sample-exisitng:/tmp/sample-exisitng"
    tasks:
      - name: git-clone
        ignore_failure: false
        script: |
          #!/bin/bash
          git clone https://github.com/hosein-yousefii/test-app.git
          echo $TEST_SECRET

      - name: waiting-time
        goal: wait for 2 seconds
        llm_output_sharing: false
        depends_on:
        - git-clone

      - name: list-envs-containers
        script: |
          #!/bin/bash
          env
          echo $TEST_SECRET
        depends_on:
        - git-clone

      - name: branch-versioning
        goal: "Change branch to nopsai-test and get the latest tag"
        depends_on:
        - git-clone

      - name: commit-hash
        goal: "what is the commit hash?"
        depends_on:
        - branch-versioning
